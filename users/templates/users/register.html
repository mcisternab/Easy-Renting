{% extends 'base/base.html' %}
{% load static %}

{% block header %}
{% endblock %}

{% block content %}

<body>
  <!--Registro de usuarios-->
  <div id="clouds">
    <div class="modal-dialog" role="document">
      <div class="modal-content rounded-5 shadow">
        <div class="modal-header p-5 pb-4 border-bottom-0">
          <!-- <h5 class="modal-title">Modal title</h5> -->    
          <img src="{% static '/img/user.png' %}" alt="user" width="100">
          <h2 class="fw-bold mb-0">Registro de usuarios</h2>
          <a href="/">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </a>
        </div>
  
        <div class="modal-body p-5 pt-0">
          <form method="POST" class="form-group">
            {% csrf_token %}
            <label for="username">Usuario:</label>
            <div class="form-group">
              <input type="text" class="form-control" name="username" placeholder="Ingrese nombre de usuario" required>  
            </div> 
            <div class="row">
            <div class="form-group col-lg-6">
                <label for="first_name">Nombre:</label>
                <input type="text" class="form-control" name="first_name" placeholder="Ingrese nombre" required>   
            </div>
            <div class="form-group col-lg-6">
                <label for="last_name">Apellido:</label>
                <input type="text" class="form-control" name="last_name" required placeholder="Ingrese apellido" required>   
            </div>
            </div>
            <label for="password">Contraseña:</label>
            <div class="row">
              <div class="form-group col-lg-10 ">
                <input id="password1" type="password" class="input_clave form-control"  name="password1" minlength="8" maxlength="20" placeholder="Ingrese contraseña" required>
              </div>
              <div class="col-lg-1">
                <i class="icono fas eye-icon fa-eye-slash " style="padding-top: 13px; padding-left: 10px;" onclick="toggle()"></i>
              </div>
              <span id="passstrength"></span>
            </div>
            <div class="row">
              <div class="form-group col-lg-10" style="padding-top: 5px;">
                <input id="password2" type="password" class="input_clave2 form-control"  name="password2" minlength="8" maxlength="20" placeholder="Repita contraseña" required>
              </div>
              <div class="col-lg-1">
                <i class="icono2 fas eye-icon fa-eye-slash" style="padding-top: 13px; padding-left: 10px;" onclick="toggle2()"></i>
              </div>
              <span id="passstrength2"></span>
            </div>
            <label for="email">Email:</label>
            <div class="form-group">
              <input type="email" class="form-control"  name="email" minlength="6" placeholder="Ingrese email" required>
            </div><br>
            <button type="reset" class="btn btn-primary button col-lg-5">Limpiar</button>
            <button type="submit" class="btn btn-primary button col-lg-5">Registrar</button>
            <hr />
            <p>¿Ya tienes una cuenta? <a href="/login">Inicia sesión aquí</a> </p>
            </form> 
        </div>
      </div>
    </div>
  </div>

  <script>
    gsap.to("#clouds", {
    ease: Linear.easeNone,
    backgroundPosition: "-2247px 0px",
    repeat: -1,
    duration: 20
    });
  </script>

{% if messages %}
  {% for m in messages %}
    <script>
      Swal.fire({
      title: '{{m}}',
      icon: 'error',
      width: 600,
      padding: '3em',
      background: '#fff url(/images/trees.png)',
      backdrop: `
        rgba(0,0,123,0.4)
        url("https://c.tenor.com/uCoZ_h8QmV8AAAAj/angry-pikachu.gif")
        center top
        no-repeat
      `,
      
    })
    </script>
  {% endfor %}
{% endif %}

  {% endblock %}

  {% block footer %}
  <footer class="text-center text-white" style="background-color: #caced1;">
    <!-- Grid container -->
    <div class="p-4">
      <!-- Section: Images -->
      <section class="">
        <div class="row">
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/termasgeo.jpg' %}"
                class="w-100 zoom"
                title="termas"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/observatorio.jpg' %}"
                class="w-100 zoom"
                title="Observatorio La Serena"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/canopy.jpg' %}"
                class="w-100 zoom"
                title="Canopy"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/termas.jpg' %}"
                class="w-100 zoom"
                title="termas"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/Banquete.jpg' %}"
                class="w-100 zoom"
                title="banquete"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
          <div class="col-lg-2 col-md-12 mb-4 mb-md-0">
            <div
              class="bg-image hover-overlay ripple shadow-1-strong rounded"
              data-ripple-color="light"
            >
              <img
                src="{% static '/img/playachiloe.jpg' %}"
                class="w-100 zoom"
                title="Chiloé"
              />
              <a href="#!">
                <div
                  class="mask"
                  style="background-color: rgba(251, 251, 251, 0.2);"
                ></div>
              </a>
            </div>
          </div>
        </div>
      </section>
      <!-- Section: Images -->
    </div>
    <!-- Grid container -->
  
    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: black">
      © 2021 Copyright:
      <a class="text-white" href="/">Easyrenting.cl</a>
    </div>
    <!-- Copyright -->
  </footer> 

  <script>
    $('#password1').keyup(function(e) {
     var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
     var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
     var enoughRegex = new RegExp("(?=.{6,}).*", "g");
     if (false == enoughRegex.test($(this).val())) {
             $('#passstrength').html('Más caracteres.');
     } else if (strongRegex.test($(this).val())) {
             $('#passstrength').className = 'ok';
             $('#passstrength').html('!Fuerte!');
     } else if (mediumRegex.test($(this).val())) {
             $('#passstrength').className = 'alert';
             $('#passstrength').html('!Media!');
     } else {
             $('#passstrength').className = 'error';
             $('#passstrength').html('!Débil!');
     }
     return true;
});
    $('#password2').keyup(function(e) {
     var strongRegex = new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$", "g");
     var mediumRegex = new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$", "g");
     var enoughRegex = new RegExp("(?=.{6,}).*", "g");
     if (false == enoughRegex.test($(this).val())) {
             $('#passstrength2').html('Más caracteres.');
     } else if (strongRegex.test($(this).val())) {
             $('#passstrength2').className = 'ok';
             $('#passstrength2').html('!Fuerte!');
     } else if (mediumRegex.test($(this).val())) {
             $('#passstrength2').className = 'alert';
             $('#passstrength2').html('!Media!');
     } else {
             $('#passstrength2').className = 'error';
             $('#passstrength2').html('!Débil!');
     }
     return true;
});

    var ojoState = false;
    function toggle() {
      var ojo = document.querySelectorAll('.icono');
      var input = document.querySelectorAll('.input_clave');

      if (ojoState) {
        input.forEach(i => {
          i.setAttribute('type', 'password');
        })
        ojo.forEach(o => {
          o.classList.remove('fa-eye');
          o.classList.add('fa-eye-slash');
        })
        ojoState = false;
      }
      else {
        input.forEach(i => {
          i.setAttribute('type', 'text');
        })
        ojo.forEach(o => {
          o.classList.add('fa-eye');
          o.classList.remove('fa-eye-slash');
        })
        ojoState = true;
      }
    }

    var ojoState = false;
    function toggle2() {
      var ojo = document.querySelectorAll('.icono2');
      var input = document.querySelectorAll('.input_clave2');

      if (ojoState) {
        input.forEach(i => {
          i.setAttribute('type', 'password');
        })
        ojo.forEach(o => {
          o.classList.remove('fa-eye');
          o.classList.add('fa-eye-slash');
        })
        ojoState = false;
      }
      else {
        input.forEach(i => {
          i.setAttribute('type', 'text');
        })
        ojo.forEach(o => {
          o.classList.add('fa-eye');
          o.classList.remove('fa-eye-slash');
        })
        ojoState = true;
      }
    }

  </script>
  </body>
  {% endblock %}